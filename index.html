<!DOCTYPE html>
<html>
<head>
    <title>CellCounter</title>
    <meta charset="UTF-8">
    <meta name="description" content="Blood cell counter">
    <meta name="keywords" content="blood cell counter">
    <meta name="author" content="Thomio Watanabe">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        table {
            width: 100%;
        }
        td, th {
            text-align: middle;
            padding: 5px;
        }
    </style>
</head>

<body>
<table>
    <tr>
        <th> <button onclick="clickButton('blasto')">Blasto</button> </th>
        <th id="blasto_percentage_id" width="70px">0%</th>
        <th> <button onclick="clickButton('promie')">Promie</button> </th>
        <th id="promie_percentage_id" width="70px">0%</th>
    </tr>
    <tr>
        <th> <button onclick="clickButton('mieneu')">Mie.Neu</button> </th>
        <th id="mieneu_percentage_id" width="70px">0%</th>
        <th> <button onclick="clickButton('metaneu')">Meta.Neu</button> </th>
        <th id="metaneu_percentage_id" width="70px">0%</th>
        <th> <button onclick="clickButton('bastneu')">Bast.Neu</button> </th>
        <th id="bastneu_percentage_id" width="70px">0%</th>
        <th> <button onclick="clickButton('neuseg')">Neu.Seg</button> </th>
        <th id="neuseg_percentage_id" width="70px">0%</th>
    </tr>
    <tr>
        <th> <button onclick="clickButton('eosinofilo')">Eosinófilo</button> </th>
        <th id="eosinofilo_percentage_id" width="70px">0%</th>
        <th> <button onclick="clickButton('basofilo')">Basófilo</button> </th>
        <th id="basofilo_percentage_id" width="70px">0%</th>
    </tr>
    <tr>
        <th> Total </th>
        <th id="total_id">0</th>
    </tr>
    <tr>
        <th> <button onclick="clickClear()">Clear</button> </th>
    </tr>

</table>



<script>
function Button(counter){
    this.counter = counter;
    this.incrementCounter = function(){ this.counter += 1; };
}

var cellList = ["blasto", "promie", "mieneu", "metaneu", "bastneu", "neuseg",
        "eosinofilo", "basofilo"];

var variablesDict = {};
for( i = 0; i < cellList.length; ++i ){
    variablesDict[cellList[i]] = new Button(0);
}
var totalCount = 0;

function clickButton( cell_name ) {
    variablesDict[cell_name].incrementCounter();
    totalCount += 1;
    document.getElementById("total_id").innerHTML = totalCount;
    if( totalCount > 0 ) {
        for( i = 0; i < cellList.length; ++i ){
            var cell_percentage = variablesDict[cellList[i]].counter/totalCount;
            document.getElementById( cellList[i] + "_percentage_id").innerHTML =
                Math.floor(cell_percentage*10000)/100 + "%";
        }
    }
}

function clickClear() {
    for( i = 0; i < cellList.length; ++i ){
        var cell_name = cellList[i];
        variablesDict[cell_name].counter = 0;
        document.getElementById(cell_name + "_percentage_id").innerHTML = "0%";
    }
    totalCount = 0;
    document.getElementById("total_id").innerHTML = totalCount;
}
</script>

</body>
</html>
