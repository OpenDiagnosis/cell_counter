<!DOCTYPE html>
<html>
<head>
    <title>CellCounter</title>
    <meta charset="UTF-8">
    <meta name="description" content="Blood cell counter">
    <meta name="keywords" content="blood cell counter">
    <meta name="author" content="Thomio Watanabe">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        table {
            width: 100%;
        }
        td, th {
            text-align: middle;
            padding: 5px;
        }
    </style>
</head>

<body>
<table>
    <tr>
        <th> Cell </th>
        <th> Counts </th>
        <th> Percentage </th>
    </tr>
    <tr>
        <th> <button onclick="clickButton('blasto')">Blasto</button> </th>
        <th id="blasto_counter_id">0</th>
        <th id="blasto_percentage_id">0%</th>
    </tr>
    <tr>
        <th> <button onclick="clickButton('mieneu')">Mie.Neu</button> </th>
        <th id="mieneu_counter_id">0</th>
        <th id="mieneu_percentage_id">0%</th>
    </tr>
    <tr>
        <th> <button onclick="clickButton('promie')">Promie</button> </th>
        <th id="promie_counter_id">0</th>
        <th id="promie_percentage_id">0%</th>
    </tr>
    <tr>
        <th> Total </th>
        <th id="total_id">0</th>
    </tr>
    <tr>
        <th> <button onclick="clickClear()">Clear</button> </th>
    </tr>

</table>



<script>
function Button(counter){
    this.counter = counter;
    this.incrementCounter = function(){ this.counter += 1; };
}

var cellList = ["blasto", "mieneu", "promie"];
var variablesDict = {};
for( i = 0; i < cellList.length; ++i ){
    variablesDict[cellList[i]] = new Button(0);
}
var totalCount = 0;

function clickButton( cell_name ) {
    variablesDict[cell_name].incrementCounter();
    document.getElementById( cell_name + "_counter_id" ).innerHTML = variablesDict[cell_name].counter;
    totalCount += 1;
    document.getElementById("total_id").innerHTML = totalCount;
    if( totalCount > 0 ) {
        for( i = 0; i < cellList.length; ++i ){
            var cell_percentage = variablesDict[cellList[i]].counter/totalCount;
            document.getElementById( cellList[i] + "_percentage_id").innerHTML =
                Math.floor(cell_percentage*1000)/10 + "%";
        }
    }
}

function clickClear() {
    for( i = 0; i < cellList.length; ++i ){
        var cell_name = cellList[i];
        variablesDict[cell_name].counter = 0;
        document.getElementById(cell_name + "_counter_id").innerHTML = "0";
        document.getElementById(cell_name + "_percentage_id").innerHTML = "0%";
    }
    totalCount = 0;
    document.getElementById("total_id").innerHTML = totalCount;
}
</script>

</body>
</html>
